<!DOCTYPE html>
<html lang="hu" layout:decorator="layouts/main">
<head>
<title>BoxInBox - Users</title>
</head>
<body>

  <div layout:fragment="loginContent">

    <h2 th:text="#{user.profile}">Profile</h2>
    
    <div id="err" th:style="${error != null ? 'display:null' : 'display:none'}" class="alert alert-danger" th:text="${error}"></div>
    <div id="success" th:if="${success}" class="alert alert-success" th:text="${success}"></div>
    
    <form action="/profile/changePassword" method="post" id="form">
      <div class="container my-border centered">
        <h4 th:text="#{user.changePassword}"></h4>
        <div class="row my-1">
          <div class="col-2">
            <label th:text="#{user.newPassword}">New password</label>
          </div>
          <div class="col-4">
            <input type="password" class="form-control" id="new-password" name="new-password" required="required" />
          </div>
        </div>
        <div class="row my-1">
          <div class="col-2">
            <label th:text="#{user.confirmNewPassword}">Confirm new password</label>
          </div>
          <div class="col-4">
            <input type="password" class="form-control" id="confirm-new-password" name="confirm-new-password" required="required" />
          </div>
        </div>
        <button  class="btn btn-primary" onClick="return samePassword(this)" >Save</button>
      </div>
    </form>

    <script th:inline="javascript">
          //<![CDATA[
          function samePassword(btn) {
        	  var n1 = document.getElementById('new-password');
        	  var n2 = document.getElementById('confirm-new-password');
        	  if(n1.value != n2.value) {
        		  var err = document.getElementById('err');
        		  err.style.display = null;
        		  err.innerHTML = 'Two password are different';
        		  return false;
        	  }
        	  btn.submit();
          }
          
          //]]>
        </script>

  </div>


</body>
</html>